{{template "base/header" .}}
<div class="admin user">
	<div class="ui container">
		<div class="ui grid">
			{{template "admin/navbar" .}}
			<div class="twelve wide column content">
				{{template "base/alert" .}}
				<h4 class="ui top attached header">
					{{.i18n.Tr "admin.domain.manage_panel"}} ({{.i18n.Tr "admin.total" .Total}})
					<div class="ui right">
						<a class="ui black tiny button" href="{{AppSubURL}}/admin/domain/new">{{.i18n.Tr "admin.domain.add_domain"}}</a>
					</div>
				</h4>
				<div class="ui unstackable attached table segment">
					<table class="ui unstackable very basic striped table">
						<thead>
							<tr>
							<th>{{.i18n.Tr "admin.domain.name"}}</th>
							<th>{{.i18n.Tr "admin.domain.mx"}}</th>
							<th>{{.i18n.Tr "admin.domain.a"}}</th>
							<th>{{.i18n.Tr "admin.domain.spf"}}</th>
							<th>{{.i18n.Tr "admin.domain.dkim"}}</th>
							<th>{{.i18n.Tr "admin.domain.dmarc"}}</th>
							<th>{{.i18n.Tr "admin.domain.is_default"}}</th>
							<th>{{.i18n.Tr "admin.domain.op"}}</th>
							</tr>
						</thead>
						<tbody>
						{{range .Domain}}
						<tr>
							<td><a href="#">{{.Domain}}</a></td>
							<td>
								<i class="fa fa{{if .Mx}}-check{{end}}-circle-o"></i>
								
							</td>
							<td><i class="fa fa{{if .A}}-check{{end}}-circle-o"></i></td>
							<td><i class="fa fa{{if .Spf}}-check{{end}}-circle-o"></i></td>
							<td><i class="fa fa{{if .Dkim}}-check{{end}}-circle-o"></i></td>
							<td><i class="fa fa{{if .Dmarc}}-check{{end}}-circle-o"></i></td>
							<td>
								<a href="{{$.Link}}/admin/domain/default/{{.Id}}"><i class="fa fa{{if .IsDefault}}-check{{end}}-square-o"></i></a>
							</td>
							<td>
								{{if not .Mx}}
								<a>
									<i domain="{{.Domain}}" onclick="showModelInfo(this);"  style="cursor:pointer;" class="fa fa-info-circle"></i>
								</a>
								{{end}}

								<a href="{{$.Link}}/admin/domain/check/{{.Id}}">
									<i class="fa fa-pencil-square-o"></i>
								</a>
								<a href="{{$.Link}}/admin/domain/delete/{{.Id}}">
									<i class="fa fa-times"></i>
								</a>
							</td>
						</tr>
						{{end}}
						</tbody>
					</table>
				</div>

				{{template "admin/base/page" .}}
			</div>
		</div>
	</div>
</div>

{{/* 模态 */}}
<div id="domain_help" class="ui modal">
  <i class="close icon"></i>
  <div class="header center">Modal Title</div>
  <div class="content">
    <div class="ui unstackable attached table segment">
		<table class="ui unstackable very basic striped table">
			<tbody>
				<tr><td>MX</td><td><i class="fa fa{{if .A}}-check{{end}}-circle-o"></i></td></tr>
				<tr><td>A</td><td><i class="fa fa{{if .A}}-check{{end}}-circle-o"></i></td></tr>
			</tbody>
		</table>
	</div>
  </div>
  <div class="actions center">
    <div class="ui button">Cancel</div>
    <div class="ui button">OK</div>
  </div>
</div>

<script>
function showModelInfo(obj){
	var domain = $(obj).attr("domain");
	$('#domain_help .header').text(domain);

	$('#domain_help').modal('show');
}

</script>
{{template "base/footer" .}}
